# ==============================================================================
# QX-Builder é…ç½®æ–‡ä»¶ (V5.0 æœ€ç»ˆç¨³å®šç‰ˆ)
# ==============================================================================
# ä½¿ç”¨è¯´æ˜:
# 1. è¿™æ˜¯ä¸€ä¸ª YAML æ–‡ä»¶ï¼Œè¯·ä¸¥æ ¼ä¿æŒç¼©è¿›ã€‚
# 2. æ‰€æœ‰é…ç½®éƒ½åŸºäº base åº•åŒ…è¿›è¡Œå¢é‡ä¿®æ”¹ã€‚
# 3. è¿™é‡Œçš„é…ç½®è¦†ç›–äº† Quantumult X çš„æ‰€æœ‰åŠŸèƒ½èŠ‚ç‚¹ã€‚
# ==============================================================================

# ------------------------------------------------------------------------------
# [æ ¸å¿ƒ] åŸºç¡€è®¾ç½® (Base)
# ------------------------------------------------------------------------------
# ä½ çš„æ‰€æœ‰é…ç½®éƒ½å°†åŸºäºè¿™ä¸ªæ–‡ä»¶è¿›è¡Œä¿®æ”¹
base:
  url: "https://ddgksf2013.top/Profile/QuantumultX.conf"

# ------------------------------------------------------------------------------
# [æ¸…æ´—] è¡¥ä¸æ’é™¤ (Patches)
# ------------------------------------------------------------------------------
# åœ¨æ³¨å…¥æ–°è§„åˆ™å‰ï¼Œå…ˆâ€œåˆ æ‰â€åº•åŒ…é‡Œä½ ä¸æƒ³è¦çš„å†…å®¹
patches:
  # 1. æ’é™¤ä¸éœ€è¦çš„ç­–ç•¥ç»„
  policy:
    keywords:
      - "Hijacking"   # åˆ æ‰åå­—é‡Œå¸¦ Hijacking çš„ç­–ç•¥ç»„
      - "å¹¿å‘Š"         # åˆ æ‰åå­—é‡Œå¸¦ å¹¿å‘Š çš„ç­–ç•¥ç»„
      - "static"      # åˆ é™¤åå­—é‡Œå¸¦ staticçš„ç­–ç•¥ç»„
      - "url-latency-benchmark" # ç§»é™¤ç­–ç•¥

  # 2. æ’é™¤ä¸éœ€è¦çš„ DNS
  dns:
    # ç§»é™¤no-ipv6é…ç½®ï¼Œå¼€å¯ipv6
    keywords: ["google","no-ipv6"]

  # 3. æ’é™¤ä¸éœ€è¦çš„æœ¬åœ°åˆ†æµ (æ…ç”¨)
  # filter_local:
  #   keywords: ["reject"]

# ------------------------------------------------------------------------------
# [é€šç”¨] å…¨å±€è®¾ç½® (General)
# ------------------------------------------------------------------------------
# è¿™é‡Œçš„ Key-Value ä¼šå¼ºåˆ¶è¦†ç›–åº•åŒ…ä¸­çš„å¯¹åº”é¡¹
general:
# [å¼ºçƒˆæ¨è] å¼ºåˆ¶ä¿®å¤ GeoIP æº (è§£å†³ 2019 å¹´æ•°æ®è¿‡æ—¶é—®é¢˜)
# geoip-url: "https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb"
# [å¯é€‰] ä¿®æ”¹èµ„æºè§£æå™¨
# resource_parser_url: "https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js"
# [å¯é€‰] ä¿®æ”¹æµ‹é€Ÿåœ°å€
# server_check_url: "http://www.gstatic.com/generate_204"

# ------------------------------------------------------------------------------
# [æ˜ å°„] ç­–ç•¥ç»„æ˜ å°„ (Policy Map)
# ------------------------------------------------------------------------------
# ä½œç”¨ï¼šå°†å¤–éƒ¨è§„åˆ™çš„ tag æ˜ å°„åˆ°åº•åŒ…çœŸå®çš„ç­–ç•¥ç»„å (Emoji)
policy_map:
  proxy: "ç¾å›½èŠ‚ç‚¹"      # å¤–éƒ¨è§„åˆ™å« proxy -> å®é™…èµ° ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  streaming: "å›½é™…åª’ä½“"  # å¤–éƒ¨è§„åˆ™å« streaming -> å®é™…èµ° ğŸŒ å›½å¤–åª’ä½“
  direct: "direct"
  reject: "reject"
  my_home: "å®¶åº­ç½‘ç»œ"    # æ˜ å°„ä¸‹é¢è‡ªå®šä¹‰çš„ç»„

# ------------------------------------------------------------------------------
# [å®šä¹‰] ç­–ç•¥ä¸ DNS
# ------------------------------------------------------------------------------
# 1. è‡ªå®šä¹‰ç­–ç•¥ç»„
policy:
  - "static=è‹¹æœæœåŠ¡, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, proxy, æ‰‹åŠ¨é€‰æ‹©, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png"
  - "static=å…¨çƒåŠ é€Ÿ, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, proxy, æ‰‹åŠ¨é€‰æ‹©, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png"
  - "static=å“”å“©å“”å“©, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ‰‹åŠ¨é€‰æ‹©, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili.png"
  - "static=å£°ç”°éŸ³ä¹, ç¾å›½èŠ‚ç‚¹, direct, å°æ¹¾èŠ‚ç‚¹, é¦™æ¸¯èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, proxy, æ‰‹åŠ¨é€‰æ‹©, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Spotify.png"
  - "static=å›½é™…åª’ä½“, å°æ¹¾èŠ‚ç‚¹, direct, é¦™æ¸¯èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, proxy, æ‰‹åŠ¨é€‰æ‹©, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png"
  - "static=å…œåº•åˆ†æµ, å…¨çƒåŠ é€Ÿ, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, proxy, æ‰‹åŠ¨é€‰æ‹©, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png"
  - "static=å®¶åº­ç½‘ç»œ, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Home.png"

#é»˜è®¤è®¾ç½®15åˆ†é’Ÿæµ‹é€Ÿä¸€æ¬¡ï¼Œå¯è‡ªè¡Œä¿®æ”¹check-interval=åé¢çš„æ•°å€¼ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œtolerance=åé¢çš„æ•°å€¼ä¸å»ºè®®ä¿®æ”¹
#å°†ä¸‹é¢çš„url-latency-benchmarkçš„å†…å®¹æ›¿æ¢æˆstaticï¼Œå¹¶åˆ é™¤[check-interval=900, tolerance=0, ]å³å¯æ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹

  - "static=æ‰‹åŠ¨é€‰æ‹©, server-tag-regex=.*, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available.png"
  - "static=ç¾å›½èŠ‚ç‚¹, server-tag-regex=(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$,  img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png"
  - "url-latency-benchmark=è‡ªåŠ¨é€‰æ‹©, server-tag-regex=^(?!.*(?:ç½‘æ˜“|å¢¨é±¼)).*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Auto.png"
  - "url-latency-benchmark=é¦™æ¸¯èŠ‚ç‚¹, server-tag-regex=(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png"
  - "url-latency-benchmark=å°æ¹¾èŠ‚ç‚¹, server-tag-regex=(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png"
  - "url-latency-benchmark=æ—¥æœ¬èŠ‚ç‚¹, server-tag-regex=(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png"
  - "url-latency-benchmark=ç‹®åŸèŠ‚ç‚¹, server-tag-regex=(?=.*(æ–°|ç‹®|ç…|SG|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|ç¾)).)*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png"
  #- "url-latency-benchmark=ç¾å›½èŠ‚ç‚¹, server-tag-regex=(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$, check-interval=900, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png"
# 2. è‡ªå®šä¹‰ DNS
dns:
  - "server=/suversal.com/192.168.1.1"    # ä½ çš„åŸŸåèµ°å†…ç½‘DNS

# ------------------------------------------------------------------------------
# [è§„åˆ™] åˆ†æµè§„åˆ™ (Filter)
# ------------------------------------------------------------------------------
# 1. æœ¬åœ°åˆ†æµè§„åˆ™
local_filters:
  # Top: æ’åˆ°æœ€å‰é¢ (ä¼˜å…ˆçº§æœ€é«˜)
  top:
    # æ–¹å¼A: å¼•ç”¨ rules ç›®å½•ä¸‹çš„æ–‡ä»¶ (å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨è·³è¿‡ä¸æŠ¥é”™)
    - "file://rules/my_custom.list"
    # æ–¹å¼B: ç›´æ¥å†™åœ¨è¿™é‡Œ
    - "ip-cidr, 192.168.0.0/16, direct, no-resolve, tag=å®¶åº­ç½‘ç»œ"
    # IPv6 ç›´è¿ï¼ˆæ‰€æœ‰ IPv6 æµé‡ä¸èµ°ä»£ç†ï¼‰
    - "ip6-cidr, ::/0, direct"

  # Bottom: æ’åˆ°æœ€åé¢ (ä¼˜å…ˆçº§æœ€ä½)
  bottom:
    - "geoip, cn, direct, tag=CN-IPç›´è¿"

# 2. è¿œç¨‹åˆ†æµè§„åˆ™å¼•ç”¨
filter_remote:
  - name: "OpenAI"
    source: "blackmatrix7" # å†…ç½®æºç®€å†™
    policy: "proxy"
    tag: "ChatGPT"

# ------------------------------------------------------------------------------
# [ä¿®æ”¹] é‡å†™ (Rewrite)
# ------------------------------------------------------------------------------
rewrite_local:
  # å¼•ç”¨æ–‡ä»¶
  - "file://rules/my_rewrites.conf"
  # ç›´æ¥å†™è§„åˆ™
  - "^https://google.cn url 302 https://google.com"

# ------------------------------------------------------------------------------
# [é«˜çº§] ä¸­é—´äººæ”»å‡» (MITM)
# ------------------------------------------------------------------------------
mitm:
  # Hostname åˆ—è¡¨ (è¿½åŠ /è¦†ç›–)
  # è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå¼ºçƒˆå»ºè®®æ”¾åœ¨æ–‡ä»¶é‡Œå¼•ç”¨
  hostname: "file://rules/my_mitm_hosts.list"

# ------------------------------------------------------------------------------
# [å…¶ä»–] ä»»åŠ¡ä¸èŠ‚ç‚¹
# ------------------------------------------------------------------------------
task_local:
# - "file://rules/my_tasks.conf"
# - "0 9 * * * https://example.com/sign.js, tag=æ¯æ—¥ç­¾åˆ°"

http_backend:
# http_backend_timeout: "10000"

server_remote:
# - "https://æˆ‘çš„æœºåœº.com, tag=æœºåœº, enabled=true"